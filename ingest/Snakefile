path_to_fauna = '../fauna'
config["s3_dst"] = "s3://nextstrain-data-private/files/workflows/avian-flu"
config["segments"] = ["pb2", "pb1", "pa", "ha","np", "na", "mp", "ns"]

wildcard_constraints:
    segment = "|".join(config["segments"])

rule all:
    # As of 2024-05-16 the default ingest only ingests data from fauna
    input:
        sequences=expand("results/fauna/sequences_{segment}.fasta", segment=config["segments"]),
        metadata="results/fauna/metadata.tsv",

rule upload_all:
    # As of 2024-05-16 the default upload only uploads data from fauna
    input:
        sequences=expand("s3/fauna/sequences_{segment}.done", segment=config["segments"]),
        metadata="s3/fauna/metadata.done",

rule all_genome:
    input:
        sequences=expand("results/genome/sequences_{segment}.fasta", segment=config["segments"]),
        metadata="results/genome/metadata.tsv",

include: "rules/upload_from_fauna.smk"
include: "rules/ingest_andersen_lab.smk"
include: "rules/ingest_genome_data.smk"

